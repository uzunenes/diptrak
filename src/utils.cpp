#include "../include/utils.h"
#include <cstddef>
#include <sys/time.h>

double
what_time_is_it_now(void)
{
	struct timeval time;
	if (gettimeofday(&time, NULL))
	{
		return 0;
	}
	return (double)time.tv_sec + (double)time.tv_usec * .000001;
}

cv::Point2f
mat_to_point(cv::Mat& m)
{
    cv::Point2f p;

    p.x = 0;
    p.y = 0;

    if( m.empty() )
    {
        return p;
    }

    p.x = m.at<float>(0);
    p.y = m.at<float>(1);

    return p;
}

cv::Mat
point_to_mat(cv::Point2f& p)
{
    cv::Mat m(2, 1, CV_32F);

    m.at<float>(0) = p.x;
    m.at<float>(1) = p.y;

    return m;
}

cv::Point
get_center_bbox_cv(cv::Rect& bbox_cv)
{
    cv::Point p;

    p.x = bbox_cv.x + (bbox_cv.width / 2);
    p.y = bbox_cv.y + (bbox_cv.height / 2);

    return p;
}

int
get_width_mat(cv::Mat& m)
{
    if (m.empty())
    {
        fprintf(stderr, "%s(): Mat is empty \n", __func__);
        return 0;
    }

    return m.cols;
}

int
get_height_mat(cv::Mat& m)
{
    if (m.empty())
    {
        fprintf(stderr, "%s(): Mat is empty \n", __func__);
        return 0;
    }

    return m.rows;
}